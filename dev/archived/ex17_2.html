<!DOCTYPE html>
<html>
	<head>
		<title>AJAX Example</title>
		<script type="text/javascript" src="js/ajaxRequest.js"></script>
	</head>
		
	<body style='text-align:center'>
		<h1>Loading a web page into a DIV</h1>
		<div id='info'>This sentence will be replaced</div>
		
		<script>
			var params = "url=amazon.com/gp/aw";
			var request = new ajaxRequest();
			
			request.open("POST", "ex17_2.php", true); // sending to the urlPost php file 
			request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			request.setRequestHeader("Content-length", params.length);
			request.setRequestHeader("Connection", "close");
			
			request.onreadystatechange = function(){ // this is set up as an anonymous funcion but it could also be a named function. Still use *this* keyword
				if(this.readyState == 4){
					if(this.status == 200){
						if(this.responseText != null){
							putContentInto($('info'), this.responseText);	
						}else{
							alert("AJAX error: No data received");
						}
					}else{
						alert("AJAX error: " + this.statustText);
					}
				}
			}
			
			request.send(params); // make the URL request
			
			function $(id){
				return document.getElementById(id);
			}
			
			function putContentInto(element,text){
				element.innerHTML = text;
			}
			
		</script>
	</body>
	
</html>