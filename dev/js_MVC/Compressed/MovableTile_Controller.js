var MovableTile_Controller=InteractiveTile_Controller.extend({construct:function(){this.SC.construct();this._moveObject;this._canMove;this._x_moveCount;this._y_moveCount;this._className="MovableTile";},init:function(){this._rect={top:0,right:0,bottom:0,left:0};this._canMove=true;this._x_moveCount=0;this._y_moveCount=0;this.addListners();},addListners:function(){g_eventHandler.addAListener("resetPosition",this);},setMoveObject:function(obj){var x=obj.x;var y=obj.y;var xMin=obj.xMin;var yMin=obj.yMin;var xMax=obj.xMax;var yMax=obj.yMax;var up=obj.up;var down=obj.down;var left=obj.left;var right=obj.right;this._moveObject={UP:{x:0,y:0,xMax:xMax,yMax:yMax,xMin:xMin,yMin:yMin,active:false},RIGHT:{x:0,y:0,xMax:xMax,yMax:yMax,xMin:xMin,yMin:yMin,active:false},DOWN:{x:0,y:0,xMax:xMax,yMax:yMax,xMin:xMin,yMin:yMin,active:false},LEFT:{x:0,y:0,xMax:xMax,yMax:yMax,xMin:xMin,yMin:yMin,active:false},};if(up){this._moveObject.UP.active=true;this._moveObject.UP.y=-y;}
if(right){this._moveObject.RIGHT.active=true;this._moveObject.RIGHT.x=x;}
if(down){this._moveObject.DOWN.active=true;this._moveObject.DOWN.y=y;}
if(left){this._moveObject.LEFT.active=true;this._moveObject.LEFT.x=-x;}},actedUpon:function(direction){this.interact(direction);},interact:function(direction){var moveInfo=this._moveObject[String(direction)];if(moveInfo.x<0){if(this._x_moveCount>moveInfo.xMin){this.removeQuads();this.setViewLoc(this.getViewX()+moveInfo.x,this.getViewY()+moveInfo.y);this._x_moveCount+=moveInfo.x;this.setRect(this.getViewX()+moveInfo.x,this.getViewY()+moveInfo.y);this.createQuads();}}else if(moveInfo.x>0){if(this._x_moveCount<moveInfo.xMax){this.removeQuads();this.setViewLoc(this.getViewX()+moveInfo.x,this.getViewY()+moveInfo.y);this._x_moveCount+=moveInfo.x;this.setRect(this.getViewX()+moveInfo.x,this.getViewY()+moveInfo.y);this.createQuads();}}else if(moveInfo.y<0){if(this._y_moveCount>moveInfo.yMin){this.removeQuads();this.setViewLoc(this.getViewX()+moveInfo.x,this.getViewY()+moveInfo.y);this._y_moveCount+=moveInfo.y;this.setRect(this.getViewX()+moveInfo.x,this.getViewY()+moveInfo.y);this.createQuads();}}else if(moveInfo.y>0){if(this._y_moveCount<moveInfo.yMax){this.removeQuads();this.setViewLoc(this.getViewX()+moveInfo.x,this.getViewY()+moveInfo.y);this._y_moveCount+=moveInfo.y;this.setRect(this.getViewX()+moveInfo.x,this.getViewY()+moveInfo.y);this.createQuads();}}},resetPosition:function(){this.removeQuads();this.getView().resetPosition();this.createQuads();}});