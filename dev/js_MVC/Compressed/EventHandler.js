var EventHandler=Class.extend({construct:function(){this._events=new Object();},addAnEvent:function(type){var exists=false;for(var i in this._events){if(this._events[i].type==type){console.log(type+" event already exists");exists=true;}}
if(!exists){this._events[type]={type:type,listeners:[]};}},dispatchAnEvent:function(type,data){var listeners=this._events[type].listeners;for(var i in listeners){listeners[i].handleAnEvent(type,data);}},dispatchAnEventOneTarget:function(type,data){var listeners=this._events[type].listeners;for(var i in listeners){if(listeners[i]==data.target){listeners[i].handleAnEvent(type,data);break;}}},addAListener:function(type,controller){if(this._events[type]==undefined){this.addAnEvent(type);}
this._events[type].listeners.push(controller);},removeAListener:function(type,controller){var index=this._events[type].listeners.indexOf(controller);if(index>-1){this._events[type].listeners.splice(index,1);}}});